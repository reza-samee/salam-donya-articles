بسم الله الرحمن الرحیم

این روز‌ها تب و تاب یادگیری زبان‌های برنامه‌نویسی جدید شدت گرفته است، و هر کسی با فلسفه‌ای و هدفی به دنبال محبوب گم‌شده‌ای میگردد! یکی متأثر از فضای علوم کامپیوتر و مباحث تابعی (Functional)، دیگری در پی سادگی و خوانایی، یکی هم به دنبال کارایی و چابکی. در این بهبوهه شاید یک معرفی صادقانه و بدور از جانبداری برآمده از علاقه‌مندی، کمک شایانی به برنامه‌نوس با تجربه و پرمشغله‌‌ای باشد که وقت سرخواراندن را ندارد! در این نوشتار قصد دارم زبانی را که چندی است با خوبی‌ها و کاستی‌هایش درگیرم را معرفی کنم: اسکالا

### اسکالا - Scala

نام اسکالا از ترکیب دو واژه «Scalable» و «Language» به وجود آمده است. از اهداف اصلی ایجاد زبان اسکالا، ارائه زبانی برای تولید نرم‌افزار مقیاس‌پذیر به روشی چابک و سریع ، و بدور از مشکلات مرسوم بوده است. همچنین اسکالا پایه‌ و اساس بستر Typesafe به حساب می‌آید؛ شرکتی که برای پشتیبانی رسمی‌ای را برای اسکالا و ابزار‌های بوجود آمده بوسیله‌ی آن ارائه می‌کند.
اسکالا زبانی کامپایلی و همچنین اسکریپتی، با نوع داده‌ای استاتیک است که روی بستر JVM اجرا می‌شود. از مزایای این زبان ارائه راهکارهای برنامه‌نویسی شئ‌گرا و تابعی در کنار یکدیگر است؛ به عبارت دیگر اسکالا تلفیق زبان‌های شی‌گرایی مثل همچون روبی و جاوا با Haskell و Erlang است. از نقطه نظر ساختار نحوی، چابکی و کارایی عده‌ای اسکالا را جمع دو دنیای زبان‌های داینامیک و استاتیک می‌دانند.
از نکات مثبت اسکالا دسترسی به تمام کتابخانه‌های موجود در جاوا است، که باعث می‌شود برنامه‌نویس از این جهت هیچ کمبودی نداشته باشد؛ کتاخانه‌های فوق‌العاده برای پردازش تصویر، هوش مصنوعی، کار با انواع فایل‌ها و پایگاه‌های داده و … .

### از اعماق افسانه‌ها

پرداختن به تک تک ویژگی‌ها، مزایا و همچنین کاستی‌هایی یک بستر و اکو-سیستمی که حول آن شکل گرفته است، راحت نیست؛ اما شاید بهترین راه برای انجام این کار، رجوع به موفقیت‌ها، تولیدات و تجربیات دیگران در استفاده از آن بستر باشد. خوشبختانه اسکالا برخلاف زبان‌هایی نوظهور دیگری که تقریباً همزمان با اسکالا معرفی شدند، بعد از Groovy بیشترین استفاده را در صنعت تولید نرم‌افزار داشته است.



چند نکته در رابطه با نمودار:
Erlang زبان‌ جدیدی نیست؛ اما از آنجا که اخیراً بیشتر مورد توجه قرار گرفته است، در این نمودار لحاظ شده است.
محور عمودی نمودار براساس تعداد کل شغل‌های رائه شده در سایت indeed.com و سایت‌های همکار بوده است. واضح است که جامعیت داده‌ها قطعی نیست.هر چند در سایت‌های تخصصی‌تری همچون careers.stackoverflow.com هم نتایج مشابهی به چشم می‌خورد اما باید توجه داشت که داده‌های مربوط به پروژه‌های موجود در گیت‌هاب می‌تواند این نمودار را (از جهت محبوبیت بین برنامه‌نویسان) تا حدودی تغییر بدهد؛ به طور مثال Docker از ابزار‌های فوق‌العاده‌ای است که با زبان Go تولید شده است و یقیناً می‌تواند نکته‌ی مثبتی برای انتخاب آن باشد.
متاستفانه در این نمودار ممکن نبود که از واژه‌ی Go به جای Golang استفاده بشود؛ در هنگام استفاده از کلیدواژه‌ی Go ، موقعیت‌های شغلی با واژه‌های Go-live یا go (به معنی رفتن) به تعداد بسیار بالا در نتایج نشان داده می‌شد. از آنجایی که عموما از واژه‌ی Golang برای اشاره‌ به زبان برنامه‌نویسی Go استفاده می‌شود، آمار مربوط به Go با ضریب تقریبی بیش از ۷۰ درصد می‌تواند صحیح قلمداد بشود.

البته در این بین به هیچ‌ وجه قصد ندارم از شرکت‌های همچون Twitter ، Google ، Foursquare و … که تولید کننده‌های تکنولوژی هستند نامی ببرم؛ شرکت‌های نام برده ابزار‌های مورد نیازشان (حتی زبان برنامه‌نویسی)  را  ایجاد می‌کنند و بدون شک برای انتخاب یک زبان برنامه‌نویسی الگوی خوبی نیستند. شاید Twitter بزرگترین شرکتی باشد که بیشترین استفاده را از اسکالا کرده است، اما یقیناً برای شخص من الگوی خوبی نخواهد بود؛ بیشترین توجه من به شرکت‌های مصرف‌کننده تکنولوژی معطوف است. شرکت‌هایی فعال در زمینه‌ی e-Commerence همچون شعبه‌ی کانادایی Walmart،ا شرکت Spendgo (فعال در زمینه‌ی POS - در ایالت سانفرانسیسکو) یا شرکتی همچون  Viridity Energy که در زمینه‌ی «تجارت انرژی» فعالیت می‌کند، مواردی هستند که نظر من را به خودشان جلب می‌کنند؛ البته در این میان نام موسساتی همچون خبرگذاری گاردین (Guardian)، سایت Huffingpost هم به چشم می‌خورند. یقیناً دانستن اینکه سرویس چینی Wandoujia که از اسکالا و آکا (Akka – بستری برای تولید نرم‌افزار‌های توزیع شده ) به ازای هر سرور میتواند به ۱ میلیون کاربر خدمات بدهد، یا اینکه شرکت WithePages با مهاجرت به اسکالا و بازنویسی بخش زیادی از سرویس‌های خود بیش از ۹۰٪ در هزینه‌ی سخت‌افزار صرفه‌جویی کرده، خالی لطف نخواهد بود (Whitepages از Ruby و Perl به اسکالا مهاجرت کرد). البته این شرکت‌های بزرگ تنها استفاده کنندگان بستر اسکالا نیستند؛ مجموعه‌های بسیار کوچکتری همچون Coursera، Tiketfly، Gilt، Datazenit و شرکت Databricks (فعال در زمینه‌ی BigData) و البته صدها شرکت دیگر نیز وجود دارند که از اسکالا برای تولید محصولات نرم‌افزاری‌شان استفاده می‌کنند.
نکته‌ای که نباید از دید پنهان بماند این است که همه‌ی شرکت‌ها در استفاده از اسکالا موفق نبوده‌اند؛ شبکه اجتماعی yammer به دلیل پیچیدگی‌های اسکالا (بنا بر اداعای گروه فنی yammer) از اسکالا به جاوا مهاجرت کردند! این در حالی است که شرکت‌های بسیاری همچون Whitepages، Coursera و... از Ruby و PHP با موفقیت به اسکالا مهاجرت کردند.

اسکلا نه تکرار مکررات است و نه کتاب ناخوانده! اسکالا پاسخی نشاید جامع، ولی مفید و ضروری به نیاز‌های صنعت نرم‌افزار است؛ صنعتی رو به رشد، متغییر و تأثیرگذار.


### … ولی چرا اسکالا ؟

همانطور که گفته شد، شرکت‌های متفاوتی با نیاز‌هایی متفاوت و وسیع از اسکالا استفاده کرده‌اند؛ هر شرکتی به دلیلی و به شیوه‌ای. اما شاید بتوان توضیح این چرایی را در چند نکته‌ی اصلی جمع‌بندی کرد:
- چابکی و کاربرپذیری/سودمندی (Productivty): با شرایط کنونی تجارت، سرعت در ارائه‌ی خدمات و توسعه‌ی آن از موارد غیر قابل چشم‌پوشی است؛ اسکالا با تکیه بر قابلیت‌های تابعی (Functional) و ساختار نحوی منعطف، به عنوان زبانی به اسطلاح DSL Firendly مطرح می‌شود، همچون Ruby. این باعث می‌شود که با کمترین میزان کد (Line Of Code – LOC) بتوان منطق مورد نظر را پیاده‌سازی و اجرا کرد. برخی اسکالا را حاصل جمع دو زبان جاوا و روبی می‌دانند: خلاصه مثل روبی، سریع و مطمئن مثل جاوا.

```‍‍‍
      // Read a file and print to Output

      // Scala
      val file  = scala.io.Source.fromFile(“filename”)
      file getLines foreach println

      // Ruby
      File.open(“filename”).each_line do | line |
         puts line
      end

      // Java
      Scanner fileScanner = new Scanner(new File("c:\\file.txt"));
      while ( fileScanner.hasNextInt() ){
              integers.add(fileScanner.nextInt());
      }
‍‍‍```

- مقیاس‌پذیری (Scalablity)  و سرعت (Performance): زبان اسکالا یک زبان استاتیک است که پس از کامپایل به بایت‌کدهای JVM تبدیل می‌شود. JVM از نظر سرعت هیچ کمبودی ندارد؛ بلاخص وقتی که JVM به واسطه‌ی ویژگی JIT ، به نهایت سرعت محاسباتی سخت‌افزار دست پیدا می‌کند (همچون C). از طرفی دیگر اسکالا به واسطه‌ی قابلیت‌ها و ابزارهایی که در بسترش وجود دارد، برنامه‌نویس را قادر می‌سازد تا به راحتی بتواند برنامه‌اش را مناسب با سخت‌افزار های MultiCore و حتی شرابط توزیع شده بنویسد.

- بستر JVM و جاوا: همان‌طور که پیش اشاره‌ کردم کد‌های اسکالا به بایت‌کدهای JVM تبدیل می‌شوند؛ در این تبدیل، عناصر زبان اسکالا به نزدیک‌ترین عناصر زبان جاوا ترجمه میشوند. این فرایند باعث نزدیکی بیشتر ۲ زبان به همدیگر میشود؛ این ویژگی باعث می‌شود که بتوان از این دو زبان در کنار هم استفاده کرد ؛ بر همین اساس به راحتی میتوان از اسکالا در ایجاد Servlet ها ، EJB ها و حتی در ترکیب با Spring استفاده کرد ( در حالی که برای Jython و ، JRuby و ... اینطور نیست )؛ تمام کتابخانه‌های نوشته شده به زبان جاوا در اسکالا قابل استفاده‌اند و این به معنی دسترسی به حجم بسیار زیادی از کتابخانه‌ها برای حل انواع مسائل است، که می‌تواند به کار توسعه‌ی نرم‌افزا سرعت بدهد. لازم به ذکر که کتابخانه‌های تولید شده توسط اسکالا هم در زبان جاوا قابل استفاده اند؛ پروژه‌های Play ، Akka و Finagle از این دسته هستند.

- بستر و شرکت Typesafe: شرکت Typesafe به صورت رسمی به توسعه‌ی کامپایلر اصلی اسکالا (که متن باز و رایگان است) و ابزار‌های مرتبط، همچون چارچوب تولید نرم‌افزا‌رهای توزیع شده‌ی Akka، چارچوب Play، محیط توسعه (IDE) و ... می‌پردازد. لازم به ذکر است که ابزار‌های بسیاری در جامعه‌ی برنامه‌نویسان اسکالا وجود دارند که به صورت رسمی از طرف شرکت قابل پشتیبانی نیستند. شاید با توجه به شرایط کنونی کشورمان، پشتیبانی رسمی از یک محصول متن باز مزیت آنچنانی به حساب نیاید، اما برای بسیاری از شرکت‌ها و فعالان حوزه‌ی اقتصادی، پشتیبانی رسمی یک امتیاز و مزیت بزرگ محسوب می‌شود.

- معماری واکنش‌گرا (Reactive): بسیاری از شرکت‌های نام‌برده شده که اسکالا را به عنوان بستر تولید نرم‌افزار خود انتخاب کرده‌اند، بستر و ابزارهای موجود برای معماری واکنش‌گرا را از دلایل اصلی انتخاب خودشان عنوان می‌کنند. مفهوم یا معماری واکنش‌گرا استانداردی است که بر اساس آن برنامه‌های تولید شده باید Message Driven ، Resilient ، Responsive و Elastic باشند. از این بین، مفهموم Responsive بودن یک نرم‌افزار تولید شده، بیش از دیگر مفاهیم برای مشتری نرم‌افزار قابل درک است.Responsive بودن یک نرم‌افزار، به معنی پاسخگو بودن آن نرم‌افزار، به مصرف‌کننده در زمان مقتضی است. طبق این اساس اگر مصرف‌کننده (کاربرنهایی یا نرم‌افزاردیگری) بیش از حد معمول منتظر پاسخ برنامه بماند، برنامه Responsive نیست.این ویژگی و تعریف تقریباً به Soft Real-Time بودن نرم‌افزار اشاره دارد.

- ویژگی‌های فنی : اسکالا یک زبان شئ‌گرا است که راهکارهای تابعی (Functional) را برای حل بهتر مسائل ارائه می‌کند. همچنین اسکالا دارای سیستم نوع داده‌ (Type System) قوی است که به برنامه‌نویس در کنترل نوع‌های داده‌ای و تست کد‌ها در زمان کامپایل کمک بسزایی میکند. اسکالا با تکیه بر همین ویژگی‌ها بستری مناسبی را برای تولید نرم‌افزارهای کاربردی و ابزار‌های تکنولوژیک ایجاد کرده است که Akka تنها یکی از نمونه‌های آن است. کتابخانه‌ها/چارچوب‌های Scalaz ، ScalaNLP ، Spark و … از ابزار‌های تولید شده بوسیله‌ی اسکالا هستند. از طرفی ویژگی‌های فنی بالا، برای برنامه‌نویسان‌ای که عموما به دنبال یادگیری و چالش‌ها جدید هستند، جذاب است و باعث رضایت شغلی بیشتری می‌شود.

### «گل بی خار خداست...»
شاید اصلی‌ترین مشکلی که در کار با اسکالا به چشم می‌خورد نبود برنامه‌نویس با تجربه و حرفه‌ای در این حوزه باشد؛ با توجه به آمار غیر رسمی‌ای که چندی پیش (بابت نوشتن همین مقاله) سعی کردم از جامعه‌ی برنامه‌نویسان اسکالا در ایران بدست بیاورم، با نیروهای موجود در کشور می‌توان نیاز ۵ تا۱۰ شرکت حرفه‌ای تولید نرم‌افزار را مرتفع کرد. شاید این آمار در مقابل برنامه‌نویسان Erlang و Ruby رقم قابل قبول و شاید زیادی باشد! اما نسبت به برنامه‌نویسان زبان‌هایی چون PHP و Java بسیار پایین است (چیزی در حدود ۰/۵ درصد). البته این مشکل در آمریکا و اروپا نیز وجود دارد. شرکت Whitepages جز شرکت‌هایی بود که با این مشکل دسته پنجه‌ نرم کرد. هم‌اکنون (که در حال نگارش مقاله هستم) بیش از ۲۳۰۰ موقعیت شغلی در سایت indeed.com برای برنامه‌نویسان اسکالا وجود دارد. گرچه شخصاً چندان اعتقادی به این حرف ندارم، ,ولی برخی دلیل کم بودن برنامه‌نویسان اسکالا را پیچیدگی‌ آن می‌دانند! که این تفکر به باور من ریشه در وسعت مباحثی دارد که زبان اسکالا پوشش میدهد. مارتین اُدرسکی ( Martin Odersky ) خالق زبان اسکالا در مطلبی که در وب سایت رسمی اسکالا منتشر کرده است، برنامه‌نویسان اسکالا را به 6 سطح تقسیم میکند که عملاً 3 سطح اولیه پیچیدگی ندارند و نامی که برای سطح سوم قائل است «Expert Application Programmer» است!
شاید برخی بر این باور نباشند، اما مشکل دیگری که به باور شخص من می‌تواند با اسکالا بوجود بیاید عدم بلوغ آن نسبت به زبان‌هایی همچون جاوا و Erlang است. اسکالا، این «جوانک پر شور و شر» به تازگی و به اقتضای نیاز‌مندی‌های برنامه‌های Enterprise آرام گرفته، ولی همچنان میل به پیش‌رفت Road-map اش نمایان است. شاید برجسته‌ترین اثر آن عدم Binary Compatiblity بین نسخه‌های اسکالا باشد؛ به این معنی که اگر سورس کدی با کامپایلر نسخه‌ی ۲.۱۰ کامپایل شده باشد، برای استفاده در پروژه‌ای که از کامپایلر ۲.۱۱ استفاده می‌کند نیازمند کامپایل دوباره است. هر چند Graham Tackley (مدیر گروه توسعه‌ی وب خبرگذاری Guardian) عنوان می‌کند که این فرایند برای آن‌ها و وسعت کاری‌شان مشکلی را ایجاد نکرده و تنها در یک روز تمام بستر را بروز‌رسانی کرده‌اند، با این حال فکر می‌کنم برای گروه‌های تازه‌کاری که به استفاده‌ی درست از ابزار‌های Build آشنا نیستند** می‌تواند مشکل بوجود بیاورد.

** ( SBT ابزار Build اسکالا که به راحتی مدیریت نیازمندی‌های پروژه را به همراه کامپایل و تست سیستم را انجام می‌دهد. چیزی بسیار راحتر از Maven برای برنامه‌نویسان Java )

### و اما ایران …
همان‌طور که پیشتر هم توضیح دادم، با نیروهای موجود در کشور می‌توان نیاز ۵ تا۱۰ شرکت حرفه‌ای تولید نرم‌افزار را مرتفع کرد. نکته‌ی مثبتی که در این میان خود می‌توان به آن اشاره کرد این است گاهی اوقات پروژه‌هایی بزرگ و کوچک با زبان اسکالا در ایران انجام شده و البته در حال انجام  است، ولی متاستفانه آماری از آن‌ها در دست نیست. از نمونه‌ پروژه‌های انجام در ایران می‌توان به سایت نمایشگاه بین الملی کتاب تهران اشاره داشت به اسکالا و چارچوب Play انجام شده است.

### من طرف‌دار زبان اسکالا نیستم...
بله، در کل من طرفدار هیچ زبان و تکنولوژی‌ای نیستم؛ به قول معروف « با هیچ زبان برنامه‌نویسی ازدواج نکردم »! سعی من همیشه بر این بوده تا برحسب نیازم بهترین ابزار را برای کارم انتخاب و یا به دیگران معرفی کنم. امروز هم اسکالا را در کنار چارچوب‌های موجود برای آن، ابزار مناسبی برای تولید انواع نرم‌افزار می‌دانم. در مقاله‌ای هم که خواندید سعی کردم نکات مثبت و منفی را به طوری شایسته و در کنار هم ذکر کنم تا انتخاب یا عدم انتخاب به صورت آگاهانه و صحیح ممکن بشود. امیدوارم به این هدف رسیده باشم.

‍‍```
از مقایسه‌ی اسکالا و ... تا یگ حرف خودمونی

پوزش می‌خواهم که این حرف را میزنم، اما به شدت از مقایسه‌های سطحی و غیر فنی بیزارم... اگر بدون داشتن اطلاعات کافی می‌گویید «اسکالا پیچیده است »، باید عرض کنم پیچیدگی اسکالا از پیچیدگی ترکیب Decorator ها و MetaClass پایتون یا قابلیت‌های MetaPrograming ای که در Ruby و JavaScript و Clojure وجود دارند پیچیده‌تر نیست؛ اگر می‌خواهید بگویید که «JVM سریع نیست» یا «مصرف حافظه‌اش زیاد است» بهتره کمی در رابطه با Memory Model پایتون، روبی یا پی.اچ.پی  و تفاوت کامپایلر و مفسر و ویژگی Just-In-Time تحقیق کنید. قطعاً نظر‌تان عوض می‌شود؛ اگر می‌خواهید بگویید که …
فکر می‌کنم جامعه‌ی فنی IT ایران باید به میزانی از سواد و درک رسیده باشد که بدونه « هر گل یک بویی داره »! و هر ابزار یک کاربردی. من به شخصه دوست دارم با اسکالا کار کنم، اما  سعی میکنم با مطالعه، مزایای Go ، Erlang ، Python و … را بدانم و بتوانم برای مشتری احتمالی بهترین مشاوره را بدهم. بهترین ابزار برای انجام آن کار، و این یعنی رفتار حرفه‌ای!
```

Martin Odersky's note about Level of Scala-Developers: http://www.scala-lang.org/old/node/8610
About Gaurdian migiration: http://www.infoq.com/articles/guardian_scala
About Yammer migration **from** Scala:
- http://www.infoworld.com/t/java-programming/yammer-banks-scala-ends-moving-java-180803
- https://gist.github.com/anonymous/1406238
http://typesafe.com/blog/qa-with-caoyuan-deng-akka-at-wandoujia